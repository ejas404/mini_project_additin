<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <%- include('../partials/bootstrap-styles') %>
        <link rel="stylesheet" href="/style.css">
</head>

<body>
    <header>
        <%- include('../partials/navbar') %>
    </header>
    <div class="container">
        <div class="bg-white rounded d-flex align-items-center justify-content-between" id="header"> <button
                class="btn btn-hide text-uppercase" type="button" data-toggle="collapse" data-target="#filterbar"
                aria-expanded="false" aria-controls="filterbar" id="filter-btn" onclick="changeBtnTxt()"> <span
                    class="fas fa-angle-left" id="filter-angle"></span> <span id="btn-txt">Filter</span> </button>
            <nav class="navbar navbar-expand-lg navbar-light pl-lg-0 pl-auto"> <button class="navbar-toggler"
                    type="button" data-toggle="collapse" data-target="#mynav" aria-controls="mynav"
                    aria-expanded="false" aria-label="Toggle navigation" onclick="chnageIcon()" id="icon"> <span
                        class="navbar-toggler-icon"></span> </button>

            </nav>
            <!-- <div class="ml-auto mt-3 mr-2">
                <nav aria-label="Page navigation example">
                    <ul class="pagination">
                        <li class="page-item"> <a class="page-link" href="#" aria-label="Previous"> <span aria-hidden="true"
                                    class="font-weight-bold">&lt;</span> <span class="sr-only">Previous</span> </a> </li>
                        <li class="page-item active"><a class="page-link" href="#">1</a></li>
                        <li class="page-item"><a class="page-link" href="#">..</a></li>
                        <li class="page-item"><a class="page-link" href="#">24</a></li>
                        <li class="page-item"> <a class="page-link" href="#" aria-label="Next"> <span aria-hidden="true"
                                    class="font-weight-bold">&gt;</span> <span class="sr-only">Next</span> </a> </li>
                    </ul>
                </nav>
            </div> -->
        </div>
        <div id="content" class="my-5">
            <div id="filterbar" class="collapse">

                <form action="/products/filter" method="get">
                    <div class="box border-bottom">
                        <div class="box-label text-uppercase d-flex align-items-center">Filter Box <button
                                class="btn ml-auto" type="button" data-toggle="collapse" data-target="#inner-box2"
                                aria-expanded="false" aria-controls="inner-box2"><span
                                    class="fas fa-plus"></span></button> </div>
                        <div>
                            <input class="btn" style="background-color:#002442; color: #fff;" type="submit"
                                value="filter">
                        </div>
                    </div>
                    <div class="box border-bottom">
                        <div class="box-label text-uppercase d-flex align-items-center">Outerwear <button
                                class="btn ml-auto" type="button" data-toggle="collapse" data-target="#inner-box"
                                aria-expanded="false" aria-controls="inner-box" id="out" onclick="outerFilter()"> <span
                                    class="fas fa-plus"></span>
                            </button> </div>
                        <div id="inner-box" class="collapse ms-2 mt-2 mr-1">
                            <% for (let each of locals.categories) { %>
                                <div class="form-check ms-2">
                                    <input class="form-check-input" type="checkbox" id="birdsCheckbox"
                                        name="categoryName" value="<%= each.category_id %>">
                                    <label class="form-check-label" for="birdsCheckbox">
                                        <%= each.categoryName %>
                                    </label>
                                </div>
                                <% } %>
                        </div>
                    </div>
                    <div class="box border-bottom">
                        <div class="box-label text-uppercase d-flex align-items-center">PRICE <button
                                class="btn ml-auto" type="button" data-toggle="collapse" data-target="#inner-box2"
                                aria-expanded="false" aria-controls="inner-box2"><span
                                    class="fas fa-plus"></span></button> </div>
                        <div id="inner-box2" class="collapse mt-2 mr-1">
                            <div class="mb-3 ml-2">
                                <label class="form-label">Select Price Range:</label>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="priceRange" id="range1"
                                        value="above-10000" style="visibility: visible;">
                                    <label class="form-check-label" for="range1">above 10000</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="priceRange" id="range1"
                                        value="5000-10000" style="visibility: visible;">
                                    <label class="form-check-label" for="range1">₹5000 - ₹10000</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="priceRange" id="range2"
                                        value="4000-5000" style="visibility: visible;">
                                    <label class="form-check-label" for="range2">₹4000 - ₹5000</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="priceRange" id="range3"
                                        value="3000-4000" style="visibility: visible;">
                                    <label class="form-check-label" for="range3">₹3000 - ₹4000</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="priceRange" id="range4"
                                        value="2000-3000" style="visibility: visible;">
                                    <label class="form-check-label" for="range4">₹2000 - ₹3000</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="priceRange" id="range5"
                                        value="1000-2000" style="visibility: visible;">
                                    <label class="form-check-label" for="range5">₹1000 - ₹2000</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="priceRange" id="range6"
                                        value="above-500" style="visibility: visible;">
                                    <label class="form-check-label" for="range6">Above ₹500</label>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="box">
                        <div class="box-label text-uppercase d-flex align-items-center">Weight <button
                                class="btn ml-auto" type="button" data-toggle="collapse" data-target="#size"
                                aria-expanded="false" aria-controls="size"><span class="fas fa-plus"></span></button>
                        </div>
                        <div id="size" class="collapse">
                            <div class="btn-group d-flex align-items-center flex-wrap" data-toggle="buttons">
                                <label class="btn btn-success form-check-label"> <input class="form-check-input"
                                        type="checkbox" name="weight" value="10"> 10 </label>
                                <label class="btn btn-success form-check-label"> <input class="form-check-input"
                                        type="checkbox" name="weight" value="5"> 5 </label>
                                <label class="btn btn-success form-check-label"> <input class="form-check-input"
                                        type="checkbox" name="weight" value="1"> 1 </label>


                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div id="products">
                <div class="row mx-0 gy-3">
                    <% if (! locals.products[0]) {%>
                        <div class="empty-message text-center">
                            <h1>Sorry No Products Please Check after some time</h1>
                        </div>
                        <% } else { %>
                            <% for(let each of locals.products) { %>

                                <div class="col-lg-4 col-md-6 pt-md-0 pt-3 position-relative">
                                    <a style="text-decoration: none;" href="/singleproduct/<%= each.product_id %>">
                                        <div style="height: 350px;" class="card d-flex flex-column align-items-center">

                                            <div class="card-img"> <img src="<%= each.productImg[0] %>" alt=""
                                                    height="100" id="shirt"> </div>
                                            <div class="product-name">
                                                <%= each.productName %>
                                            </div>
                                            <div class="card-body pt-0">

                                                <div class="d-flex align-items-center price">
                                                    <div class="del mr-2"><span class="text-dark"
                                                            style="font-size: 15px;">Rs.<%= Number(each.productPrice) +
                                                                1000 %></span></div>
                                                    <div class="font-weight-bold "
                                                        style="font-weight: bold; margin-left: 5px;">Rs.
                                                        <%=each.productPrice %>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </a>
                                    <div class="productButtons ps-2 position-absolute d-flex justify-content-between" 
                                    style="top: 90%; width: 90%;">
                                        <% if (locals.cart && locals.cart[0]?.productIds.includes(each.product_id)) { %>
                                        <a class="default-button px-2 rounded d-block" href="/user/cart">Go to Cart -></a>
                                        <% } else { %>
                                        <div class="pb-1 add-to-cart-btn"  onclick="addToCart('<%= each.product_id %>')"><i class="fa-solid fa-cart-plus" style="font-size: 25px;"></i></div>
                                        <% } %>
                                        <a class="buy-now-btn d-block " style="text-decoration: none;"  href="">Buy Now -></a>
    
                                    </div>
                                    <div class="wishlist position-absolute top-0">
                                        <a href="">heart</a>
                                    </div>
    
                                </div>

                                <% } %>
                                <% } %>

                </div>
            </div>
        </div>
    </div>
    <%- include('../partials/bootstrap-script') %>
    <script src="/scripts/productsfilter.js"></script>
    <script src="/scripts/add_to.js"></script>
</body>

</html>